<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>データと挙動の共有 :: Motoko documentation</title>
    <meta name="generator" content="Antora 2.3.4">
<link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /><meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:title" content="The Internet Computer | Documentation" />
<meta property="og:description" content="Documentation for the internet computer." />
<meta property="og:image" content="../../_/img/share.jpg" />
<meta property="og:image:url" content="../../_/img/share.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@DFINITYDev" />
<meta name="twitter:image" content="../../_/img/logo-RGB.png" />
<meta name="twitter:image:alt" content="DFINITY Logo" />    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="logo-container" href="https://dfinity.org/">
        <img class="header-logo" src="../../_/img/logo.svg">
        <h1 class="header-title">Motoko documentation</h1>
      </a>
    </div>
    <div class="nav-items-wrapper">
      <div class="search-container">
  <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd"
      d="M11.8654 12.5892C10.8213 13.4695 9.47259 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8C14 9.47209 13.4699 10.8204 12.5901 11.8643L17.3625 16.6367L16.6377 17.3615L11.8654 12.5892ZM12.9333 8C12.9333 10.7246 10.7246 12.9333 8 12.9333C5.2754 12.9333 3.06667 10.7246 3.06667 8C3.06667 5.2754 5.2754 3.06667 8 3.06667C10.7246 3.06667 12.9333 5.2754 12.9333 8Z"
      fill="black" />
  </svg>


  <input class="search-input" placeholder="Search" type="search" />
</div>      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div id="topbar-nav" class="navbar-menu">
        <div class="navbar-end">
          <a class="navbar-item" target="blank" href="https://forum.dfinity.org/">Forum</a>
          <a class="navbar-item" target="blank" href="mailto:support@dfinity.org?subject=Feedback - SDK Developer Center">Email us</a>
          <a class="navbar-item" target="blank" href="https://www.twitter.com/dfinitydev">
            <img src="../../_/img/social/twitter-icon.svg">
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="file:///build/doc/modules/language-guide/pages/sharing.adoc"><svg class="edit-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg></a></div>
</div>
<div class="main-content">
<article class="doc">
<h1 class="page">データと挙動の共有</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Motoko では、ミュータブルなステートは常にプライベートであることを思い出してください。</p>
</div>
<div class="paragraph">
<p>しかしながら、2 つの Actor はメッセージによってデータを共有することができ、それらのメッセージは自分自身とお互いを含む Actor を参照することができます。
さらに、<code>shared</code> 関数であれば、メッセージが個々の関数を参照することが可能です。</p>
</div>
<div class="paragraph">
<p>これらのメカニズムにより、2つの Actor は非同期のメッセージパッシングによって挙動を協調させることができます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actor_による出版_購読型publisher_subscriberパターン"><a class="anchor" href="#_actor_による出版_購読型publisher_subscriberパターン"></a>Actor による出版-購読型（Publisher-subscriber）パターン</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この章の例では、 <a href="https://en.wikipedia.org/wiki/Publish-subscribe_pattern">出版-購読型パターン</a> のいくつかの例に焦点を当て、Actor がどのように関数を共有するかを説明します。
出版-購読型パターンでは、<strong>出版する（publishing）</strong> Actor は、<strong>購読する（subscriber）</strong> Actor のリストを記録して、出版者のステートに何らかの変化があった際に通知します。
例えば、出版者の Actor が新しい記事を発行すると、購読者の Actor に対して新たな記事があることが通知されます。</p>
</div>
<div class="paragraph">
<p>以下は 2 つの Actor を使って Motoko で出版-購読型の関係を構築する例を示します。</p>
</div>
<div class="paragraph">
<p>このパターンを使用するプロジェクトの全体のコードを見るには、<a href="https://github.com/dfinity/examples">サンプルリポジトリ</a> の <a href="https://github.com/dfinity/examples/tree/master/motoko/pubsub">pubsub</a> をご覧ください。</p>
</div>
<div class="sect2">
<h3 id="_購読者subscriber_actor"><a class="anchor" href="#_購読者subscriber_actor"></a>購読者（Subscriber） Actor</h3>
<div class="paragraph">
<p>以下の <code>Subscriber</code> Actor の型は、出版者 Actor から呼び出すことができるように購読者 Actor が公開しているインターフェースです。</p>
</div>
<div id="tsub" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">type Subscriber = actor {
  notify : () -&gt; ()
};</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Publisher</code> はこの型を、購読者をデータとして保持するデータ構造を定義するために使います。</p>
</li>
<li>
<p>それぞれの <code>Subscriber</code> Actor は、上の例で型シグネチャが示しているように、更新用の関数である <code>notify</code> を公開しています。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>サブタイピングによって、<code>Subscriber</code> Actor は上の型定義で示されていない追加のメソッドを含むことが可能であることに注意してください。</p>
</div>
<div class="paragraph">
<p>問題を単純にするため、<code>notify</code> 関数は関連する通知データを受け取り、購読者に関する何らかの新しいステータスメッセージを出版者に返すことにしましょう。
例えば、購読者は通知されるデータに基づき、購読に関する設定の変更を返すかもしれません。</p>
</div>
</div>
<div class="sect2">
<h3 id="_出版者publisher_actor"><a class="anchor" href="#_出版者publisher_actor"></a>出版者（Publisher） Actor</h3>
<div class="paragraph">
<p>出版者側は購読者の配列を持ちます。
問題を単純にするため、それぞれの購読者は <code>subscribe</code> 関数を用いて一度だけ購読できるものとしましょう。</p>
</div>
<div id="pub" class="listingblock include_tsub">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">import Array "mo:base/Array";

actor Publisher {
    var subs: [Subscriber] = [];

    public func subscribe(sub: Subscriber) {
        subs := Array.append&lt;Subscriber&gt;(subs, [sub]);
    };

    public func publish() {
        for (sub in subs.vals()) {
          sub.notify();
        };
    };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>その後、ある外部のエージェント（agent）が <code>publish</code> 関数を呼び出すと、上で述べた <code>Subscriber</code> 型で定義されている <code>notify</code> メッセージをすべての購読者が受け取ります。</p>
</div>
</div>
<div class="sect2">
<h3 id="_購読者メソッド"><a class="anchor" href="#_購読者メソッド"></a>購読者メソッド</h3>
<div class="paragraph">
<p>最も単純なケースでは、購読者 Actor は以下のメソッドを持ちます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>init</code> メソッドを用いて出版者からの通知を購読する。</p>
</li>
<li>
<p>購読者 Actor の一人として、上記 <code>Subscriber</code> 型の <code>notify</code> 関数で指定された通知を受け取る。</p>
</li>
<li>
<p>蓄積したステートに対する問い合わせを許可する。このサンプルコードでは受け取った通知の数を保存する <code>count</code> 変数に対する <code>get</code> メソッドがそれに該当する。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>次のコードは、これらのメソッドを実装した例です。</p>
</div>
<div class="listingblock include_tsub_pub">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">actor Subscriber {
  var count: Nat = 0;
  public func init() {
    Publisher.subscribe(Subscriber);
  };
  public func notify() {
    count += 1;
  };
  public func get() : async Nat {
    count
  };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>この Actor は <code>init</code> 関数が一度だけ呼ばれることを想定していますが、強制はしていません。
この <code>init</code> 関数では、<code>Subscriber</code> Actor は自分自身への参照を <code>actor { notify : () &#8594; () };</code> 型で渡します（ここでは上の <code>Subscriber</code> を呼んでいます）。</p>
</div>
<div class="paragraph">
<p>もし複数回呼ばれた場合、Actor は自分自身を複数回購読することになり、出版者から複数の（重複した）通知を受信することになります。
この脆弱性は、上で示した基本的な出版-購読型パターンの設計の結果です。
より注意深く設計された、より高度な出版者であれば、例えば購読者の重複をチェックして無視することでしょう。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actor_間の関数の共有"><a class="anchor" href="#_actor_間の関数の共有"></a>Actor 間の関数の共有</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Motoko では、<code>shared</code> Actor 関数はメッセージで他の Actor に送ることができ、後で自分自身や他の Actor から呼び出すことができます。</p>
</div>
<div class="paragraph">
<p>上に示したコードは説明のために単純化されています。
完全なコードでは出版者と購読者の関係に対してさらなる機能が提供されており、この関係をより柔軟なものにするために shared 関数が用いられています。</p>
</div>
<div class="paragraph">
<p>例えば、上のコードでは通知用の関数は <em>常に</em> <code>notify</code> と名付けられています。
より柔軟な設計としては、<code>notify</code> の型だけを固定しておき、購読者 Actor そのものを渡す代わりに <code>subscribe</code> メッセージで指定する <code>shared</code> 関数を購読者が選択できるようにすることが考えられます。</p>
</div>
<div class="paragraph">
<p>詳しくは、<a href="https://github.com/dfinity/examples/tree/master/motoko/pub-sub">完全なコード例</a> をご覧ください。</p>
</div>
<div class="paragraph">
<p>特に、購読者がそのインターフェースの特定の命名規則に縛られることを避けたいとします。
本当に重要なのは、購読者が選んだ <em>ある</em> 関数を発行者が呼び出せるかどうかです。</p>
</div>
<div class="sect2">
<h3 id="_shared_キーワード"><a class="anchor" href="#_shared_キーワード"></a><code>shared</code> キーワード</h3>
<div class="paragraph">
<p>この柔軟性を実現するために、Actor は単なる自分自身への参照ではなく、他の Actor からのリモート呼び出しを可能にする一つの <em>関数</em> を共有する必要があります。</p>
</div>
<div class="paragraph">
<p>関数を共有するには、あらかじめ <code>shared</code> と指定する必要があり、型システムはこれらの関数の引数の型、返り値の型、クロージャが包む（close over）データ型が、特定のルールに従うことを強制しています。</p>
</div>
<div class="paragraph">
<p>Motoko では、<em>public</em> な Actor メソッドに対して shared キーワードを省略することができます。なぜなら、暗黙のうちに（明示的にマークされているかどうかにかかわらず）<em>Actor のパブリック関数は <code>shared</code> でなければならない</em> からです。</p>
</div>
<div class="paragraph">
<p><code>shared</code> 関数型を使用すると、上記の例をより柔軟に拡張することができます。
例えば、以下のようにします。</p>
</div>
<div id="submessage" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">type SubscribeMessage = { callback: shared () -&gt; (); };</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは元の Subscribe 型とは異なり、<code>callback</code> という単一のフィールドを持つ <em>メッセージ</em> のレコード型を記述しており、最初に示したオリジナルの型は <code>notify</code> という単一のメソッドを持つ <em>Actor</em> 型を記述しています。</p>
</div>
<div id="typesub" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">type Subscriber = actor { notify : () -&gt; () };</code></pre>
</div>
</div>
<div class="paragraph">
<p>注目すべきなのは、<code>actor</code> キーワードが意味するのは、この型はフィールドを持つ通常のレコードではなく、少なくとも 1 つのメソッドがあり、そのメソッドは <code>notify</code> という名前で <em>なければならない</em> ということです。</p>
</div>
<div class="paragraph">
<p>代わりに <code>SubscribeMessage</code> 型を使用することで、<code>Subscriber</code> Actor は <code>notify</code> メソッドに別の名前を指定することができます。</p>
</div>
<div id="newsub" class="listingblock include_submessage_newpub">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">actor Subscriber {
  var count: Nat = 0;
  public func init() {
    Publisher.subscribe({callback = incr;});
  };
  public func incr() {
    count += 1;
  };
  public query func get(): async Nat {
    count
  };
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>元のバージョンと比較すると、唯一変わっている行は <code>notify</code> の名前を <code>incr</code> に変更し、<code>{callback = incr}</code> 式を用いて新しい <code>subscribe</code> メッセージのペイロードを形成している部分です。</p>
</div>
<div class="paragraph">
<p>同様に、出版者も対応するインターフェイスを持つように更新することが出来ます。</p>
</div>
<div id="newpub" class="listingblock include_submessage">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">import Array "mo:base/Array";
actor Publisher {
  var subs: [SubscribeMessage] = [];
  public func subscribe(sub: SubscribeMessage) {
    subs := Array.append&lt;SubscribeMessage&gt;(subs, [sub]);
  };
  public func publish() {
    for (sub in subs.vals()) {
      sub.callback();
    };
  };
};</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar">
  
  <div class="toc-menu"></div>
</aside></div>
</main></div>
<footer class="footer">
  <div class="footer-container">
    <a href="http://www.dfinity.org"><img class="footer-logo" src="../../_/img/logo.svg"></a>
    <nav class="footer-nav">
      <div class="col1">
        <h5 class="footer-header">Developers</h5>
        <a class="footer-link" href="http://www.dfinity.org/faq">
          FAQ
        </a>
        <a class="footer-link" href="#">
          Developers
        </a>
        <a class="footer-link" href="http://www.dfinity.org/data-centers">
          Data Centers
        </a>
      </div>

      <div class="col2">
        <h5 class="footer-header">Team</h5>
        <a class="footer-link" href="http://www.dfinity.org/foundation">
          Foundation
        </a>
        <a class="footer-link" href="http://www.dfinity.org/foundation#events">
          Events
        </a>
        <a class="footer-link" href="http://www.dfinity.org/careers">
          Careers
        </a>
      </div>


      <div class="col3">
        <h5 class="footer-header">Media</h5>
        <a class="footer-link" href="http://www.dfinity.org/media">
          Featured Videos
        </a>
        <a class="footer-link" href="http://www.dfinity.org/media#featured-stories">
          Featured Stories
        </a>
        <a class="footer-link" href="http://www.dfinity.org/newsletter">
          Newsletter
        </a>
      </div>

      <div class="social-icons">

        <a class="social-icon-link" target="blank" href="https://github.com/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 0C5.3625 0 0 5.3625 0 12C0 17.2875 3.45 21.7875 8.2125 23.4C8.8125 23.5125 9.0375 23.1375 9.0375 22.8375C9.0375 22.5375 9.0375 21.7875 9.0375 20.8125C5.7 21.525 4.9875 19.2 4.9875 19.2C4.425 17.8125 3.6375 17.4375 3.6375 17.4375C2.55 16.6875 3.7125 16.725 3.7125 16.725C4.9125 16.8 5.55 17.9625 5.55 17.9625C6.6375 19.8 8.3625 19.275 9.0375 18.975C9.15 18.1875 9.45 17.6625 9.7875 17.3625C7.125 17.0625 4.3125 16.0125 4.3125 11.4375C4.3125 10.125 4.7625 9.075 5.55 8.2125C5.4375 7.9125 5.025 6.675 5.6625 5.025C5.6625 5.025 6.675 4.6875 8.9625 6.2625C9.9375 6 10.95 5.85 11.9625 5.85C12.975 5.85 14.025 6 14.9625 6.2625C17.25 4.725 18.2625 5.025 18.2625 5.025C18.9 6.675 18.4875 7.9125 18.375 8.2125C19.1625 9.0375 19.6125 10.125 19.6125 11.4375C19.6125 16.05 16.8 17.0625 14.1375 17.3625C14.55 17.7375 14.9625 18.45 14.9625 19.575C14.9625 21.1875 14.9625 22.4625 14.9625 22.875C14.9625 23.2125 15.1875 23.5875 15.7875 23.4375C20.55 21.7875 24 17.2875 24 12C24 5.3625 18.6375 0 12 0Z"
              fill="#333333" />
          </svg>

        </a>
        <a class="social-icon-link" target="blank" href="https://medium.com/dfinity-network-blog">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M22.3125 1H1.6875C1.50516 1 1.3303 1.07243 1.20136 1.20136C1.07243 1.3303 1 1.50516 1 1.6875L1 22.3125C1 22.4948 1.07243 22.6697 1.20136 22.7986C1.3303 22.9276 1.50516 23 1.6875 23H22.3125C22.4948 23 22.6697 22.9276 22.7986 22.7986C22.9276 22.6697 23 22.4948 23 22.3125V1.6875C23 1.50516 22.9276 1.3303 22.7986 1.20136C22.6697 1.07243 22.4948 1 22.3125 1V1ZM19.2768 6.21228L18.0971 7.34356C18.0471 7.38153 18.0085 7.43245 17.9854 7.4908C17.9623 7.54916 17.9557 7.61272 17.9661 7.67459V15.9875C17.9557 16.0494 17.9623 16.1129 17.9854 16.1713C18.0085 16.2296 18.0471 16.2806 18.0971 16.3185L19.2493 17.4498V17.698H13.4534V17.4498L14.6469 16.2903C14.7641 16.1731 14.7641 16.1388 14.7641 15.9593V9.24072L11.4455 17.6698H10.9987L7.13319 9.24072V14.8899C7.11729 15.0071 7.12828 15.1264 7.16533 15.2387C7.20237 15.351 7.2645 15.4535 7.347 15.5382L8.89937 17.4213V17.6695H4.49731V17.4213L6.04969 15.5382C6.13152 15.4534 6.19226 15.3505 6.22701 15.2379C6.26177 15.1253 6.26956 15.0061 6.24975 14.8899V8.35866C6.25855 8.26945 6.24627 8.17943 6.21391 8.09584C6.18155 8.01225 6.13001 7.93743 6.06344 7.87741L4.68362 6.21503V5.96684H8.96847L12.2805 13.2303L15.1924 5.96684H19.2768V6.21228Z"
              fill="#333333" />
          </svg>

        </a>
        <a class="social-icon-link" target="blank" href="https://twitter.com/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M23 5.33654C22.175 5.67308 21.3156 5.94231 20.4219 6.04327C21.35 5.50481 22.0719 4.62981 22.4156 3.58654C21.5562 4.09135 20.5938 4.46154 19.5625 4.66346C18.7031 3.78846 17.5344 3.25 16.2281 3.25C13.7187 3.25 11.725 5.23558 11.725 7.65865C11.725 7.99519 11.7594 8.33173 11.8281 8.66827C8.08125 8.5 4.74688 6.71635 2.54688 4.05769C2.16875 4.69712 1.92813 5.47115 1.92813 6.27885C1.92813 7.82692 2.71875 9.17308 3.92188 9.94712C3.16562 9.91346 2.47812 9.71154 1.89375 9.40865C1.89375 9.44231 1.89375 9.44231 1.89375 9.47596C1.89375 11.6298 3.44063 13.4135 5.50313 13.8173C5.125 13.9183 4.7125 13.9856 4.3 13.9856C4.025 13.9856 3.71562 13.9519 3.44062 13.9183C4.025 15.6683 5.675 16.9471 7.66875 16.9808C6.12187 18.1587 4.1625 18.8654 2.06562 18.8654C1.6875 18.8654 1.34375 18.8317 1 18.7981C2.99375 20.0096 5.36563 20.75 7.90938 20.75C16.2281 20.75 20.7656 14.0192 20.7656 8.16346C20.7656 7.96154 20.7656 7.79327 20.7656 7.59135C21.625 6.98558 22.3813 6.21154 23 5.33654Z"
              fill="#333333" />
          </svg>

        </a>

        <a class="social-icon-link" target="blank" href="https://forum.dfinity.org/">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12.0932 1C6.0727 1 1 5.83706 1 11.8085C1 12 1.00488 23 1.00488 23L12.0933 22.9901C18.1188 22.9901 23 17.9666 23 11.9951C23 6.02373 18.1188 1 12.0932 1ZM12 18.2857C11.0473 18.2857 10.1388 18.0745 9.32853 17.6916L5.34597 18.6786L6.47047 14.9956C5.98926 14.1067 5.71423 13.0853 5.71423 12C5.71423 8.52815 8.52811 5.71428 12 5.71428C15.4719 5.71428 18.2857 8.52815 18.2857 12C18.2857 15.472 15.4719 18.2857 12 18.2857Z"
              fill="#333333" />
          </svg>

        </a>

        <a class="social-icon-link" target="blank" href="https://www.linkedin.com/company/dfinity'">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M1 4.35878C1 3.01688 2.03589 2 3.61924 2C5.20139 2 6.17406 3.01448 6.20507 4.35519C6.20507 5.67205 5.20139 6.71456 3.58942 6.71456H3.55841C2.00666 6.71456 1 5.67562 1 4.35878ZM17.5581 8.28158C15.1017 8.28158 13.5625 9.61217 13.278 10.5449V8.41225H8.46122C8.52324 9.54475 8.46122 21.9995 8.46122 21.9995H13.278V14.647C13.278 14.5987 13.2778 14.5505 13.2775 14.5025C13.2756 14.1436 13.2736 13.7952 13.383 13.5365C13.714 12.7194 14.4255 11.8719 15.7046 11.8719C17.3775 11.8719 18.1378 13.128 18.1378 14.9685V21.9995H23V14.4448C23 10.236 20.6056 8.28158 17.5581 8.28158ZM1.55371 8.41275H5.84157V22H1.55371V8.41275Z"
              fill="#333333" />
          </svg>

        </a>

        <a class="social-icon-link" target="blank" href="https://youtube.com/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M23.775 7.6375C23.775 7.6375 23.55 5.9875 22.8375 5.2375C21.9375 4.3 20.8875 4.2625 20.4375 4.225C17.025 4 12 4 12 4C12 4 6.975 4 3.6 4.225C3.1125 4.2625 2.1 4.3 1.2 5.2375C0.4875 5.95 0.2625 7.6375 0.2625 7.6375C0.2625 7.6375 0 9.5875 0 11.5375V13.375C0 15.325 0.225 17.275 0.225 17.275C0.225 17.275 0.45 18.925 1.1625 19.675C2.0625 20.6125 3.2625 20.6125 3.825 20.6875C5.7375 20.875 12 20.9125 12 20.9125C12 20.9125 17.025 20.9125 20.4 20.65C20.8875 20.6125 21.9 20.575 22.8 19.6375C23.5125 18.925 23.7375 17.2375 23.7375 17.2375C23.7375 17.2375 24 15.2875 24 13.3375V11.5C24 9.5875 23.775 7.6375 23.775 7.6375ZM9.525 15.55V8.8L16.0125 12.175L9.525 15.55Z"
              fill="#333333" />
          </svg>

        </a>

      </div>
    </nav>

    <div class="legal-container">
      <span class="legal" id="year">
        © 2020 DFINITY
      </span>
      <a class="legal footer-link" href="http://www.dfinity.org/terms-of-use">
        Terms of Use
      </a>
      <a class="legal footer-link" href="http://www.dfinity.org/cookie-policy">
        Cookie Policy
      </a>
      <a class="legal footer-link" href="http://www.dfinity.org/privacy-policy">
        Privacy Policy
      </a>
    </div>

  </div>
</footer>


<script>
  var today = new Date();
  var year = today.getFullYear();
  document.getElementById("year").innerHTML = `© ${year} DFINITY`;
</script><script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
    apiKey: 'b93d56cc4b00b0afbcdaacab04dcf25b',
    indexName: 'dfinity_sdk',
    inputSelector: '.search-input',
    debug: false // Set debug to true if you want to inspect the dropdown
  });
</script>

<!-- Start of dfinity Zendesk Widget script -->
<script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=53121947-c10a-484c-b99b-f89a9fb6f63e"> </script>
<!-- End of dfinity Zendesk Widget script -->

<script src="../../_/js/vendor/run_repl.js"></script>
<script type="module">
  import {CodeJar} from 'https://cdn.jsdelivr.net/npm/codejar@3.2.3/codejar.min.js';
  import {withLineNumbers} from 'https://cdn.jsdelivr.net/npm/codejar@3.2.3/linenumbers.js';
  window.CodeJar = CodeJar;
  window.withLineNumbers = withLineNumbers;
</script> 
<script type="text/javascript">
async function addPackage(name, repo, version, dir) {
  const meta_url = `../../_/js/vendor/${repo}/flat`;
  const base_url = `../../_/js/vendor/${repo}`;
  const response = await fetch(meta_url);
  const json = await response.json()
  const promises = [];
  const fetchedFiles = [];
  for (const f of json.files) {
    if (f.name.startsWith(`/${dir}/`) && /\.mo$/.test(f.name)) {
      const promise = (async () => {
        const content = await (await fetch(base_url + f.name)).text();
        const stripped = name + f.name.slice(dir.length + 1);
        fetchedFiles.push(stripped);
        Motoko.saveFile(stripped, content);
      })();
      promises.push(promise);
    }
  }
  Promise.all(promises).then(() => {
    Motoko.addPackage(name, name + '/');
    console.log("base library loaded");
    changeCodeBlock(); // from run_repl.js
  });
}
function loadBase() {
  addPackage('base', 'dfinity/motoko-base', 'moc-0.6.27', 'src');
}
</script>
<script async src="../../_/js/vendor/moc.js" onload="loadBase()">
</script>
  </body>
</html>
